import{_ as i}from"./TopTitle.d5a5b170.js";import{_ as o,J as r,K as l,L as h,l as p,F as n,a4 as y,a5 as g,M as u}from"./index.458a6082.js";const c={name:"ExploreView",components:{TopTitle:i},beforeRouteUpdate(t,e,s){this.showLoadMoreButton=!1,this.hasMore=!0,this.playlists=[],this.offset=1,this.activeCategory=t.query.category,this.getPlaylist(),s()},data(){return{show:!1,playlists:[],activeCategory:"\u5168\u90E8",loadingMore:!1,showLoadMoreButton:!1,hasMore:!0,allBigCats:["\u8BED\u79CD","\u98CE\u683C","\u573A\u666F","\u60C5\u611F","\u4E3B\u9898"],showCatOptions:!1}},computed:{subText(){return this.activeCategory==="\u6392\u884C\u699C"?"updateFrequency":this.activeCategory==="\u63A8\u8350\u6B4C\u5355"?"copywriter":"none"}},activated(){this.loadData(),this.$parent.$refs.scrollbar.restorePosition()},methods:{loadData(){setTimeout(()=>{this.show||NProgress.start()},1e3),this.activeCategory=this.$route.query.category===void 0?"\u5168\u90E8":this.$route.query.category,this.getPlaylist()},goToCategory(t){this.showCatOptions=!1,this.$router.push({name:"explore",query:{category:t}})},updatePlaylist(t){this.playlists.push(...t),this.loadingMore=!1,this.showLoadMoreButton=!0,NProgress.done(),this.show=!0},getPlaylist(){return this.loadingMore=!0,this.activeCategory==="\u63A8\u8350\u6B4C\u5355"?this.getRecommendPlayList():this.activeCategory==="\u7CBE\u54C1\u6B4C\u5355"?this.getHighQualityPlaylist():this.activeCategory==="\u6392\u884C\u699C"?this.getTopLists():this.getTopPlayList()},getRecommendPlayList(){getRecommendPlayList(100,!0).then(t=>{this.playlists=[],this.updatePlaylist(t)})},getHighQualityPlaylist(){let t=this.playlists,e=t.length!==0?t[t.length-1].updateTime:0;highQualityPlaylist({limit:50,before:e}).then(s=>{this.updatePlaylist(s.playlists),this.hasMore=s.more})},getTopLists(){toplists().then(t=>{this.playlists=[],this.updatePlaylist(t.list)})},getTopPlayList(){topPlaylist({cat:this.activeCategory,offset:this.playlists.length}).then(t=>{this.updatePlaylist(t.playlists),this.hasMore=t.more})},getCatsByBigCat(t){return playlistCategories.filter(e=>e.bigCat===t)},toggleCat(t){this.togglePlaylistCategory(t)}}},d=t=>(y("data-v-1d0b3bb7"),t=t(),g(),t),f=d(()=>u("div",{style:{"margin-top":"12px"}},"\u8FD8\u5728\u505A\u{1F92A}\u{1F92A}\u{1F92A}",-1));function m(t,e,s,_,P,C){const a=r("TopTitle");return l(),h(n,null,[p(a,{style:{height:"85px"}}),f],64)}var b=o(c,[["render",m],["__scopeId","data-v-1d0b3bb7"]]);export{b as default};
